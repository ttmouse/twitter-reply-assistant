# 存储操作失败解决方案

## 问题描述

如果您遇到"存储操作失败，请重试"的错误，这通常是由于以下原因之一：

1. 浏览器存储配额不足
2. 扩展权限问题
3. 扩展上下文失效（页面刷新或扩展重新加载时可能出现）

## 解决方案

### 方法1：使用内置存储诊断工具

1. 点击扩展图标打开弹窗
2. 切换到"存储"标签页
3. 点击"运行诊断"按钮检查存储状态
4. 根据诊断结果选择相应的修复选项

### 方法2：手动清除扩展数据

#### 选项A：仅清除AI配置
1. 打开扩展弹窗
2. 进入"存储"标签页
3. 点击"修复选项"
4. 选择"清除AI配置"

#### 选项B：清除自定义风格
1. 打开扩展弹窗
2. 进入"存储"标签页
3. 点击"修复选项"
4. 选择"清除自定义风格"

#### 选项C：清除所有数据
1. 打开扩展弹窗
2. 进入"存储"标签页
3. 点击"修复选项"
4. 选择"清除所有数据"
5. 重新配置扩展

### 方法3：使用浏览器开发者工具

1. 在Chrome中打开开发者工具（F12）
2. 进入控制台(Console)标签
3. 运行以下命令进行存储诊断：

```javascript
// 运行存储诊断
runStorageDiagnostic()

// 如果需要，清除所有数据
clearStorageData({clearAll: true})

// 测试存储功能
testStorage()
```

### 方法4：重新安装扩展

如果以上方法都无效，您可以尝试重新安装扩展：

1. 在Chrome扩展管理页面(chrome://extensions/)卸载当前扩展
2. 删除扩展文件夹
3. 重新安装扩展
4. 重新配置API设置

## 预防措施

1. **定期清理**：定期使用存储诊断工具检查存储状态
2. **合理配置**：避免创建过多的自定义风格
3. **及时更新**：保持扩展为最新版本

## 技术细节

Chrome扩展使用`chrome.storage.sync` API存储数据，该API有以下限制：

- 总存储容量：约100KB
- 单个项目大小：约8KB
- 写入操作频率：每分钟不超过120次

当接近这些限制时，可能会出现存储操作失败的情况。

## 联系支持

如果您尝试了以上所有方法仍无法解决问题，请：

1. 收集错误截图
2. 打开开发者控制台查看详细错误信息
3. 提交Issue到项目仓库

---

**注意**：清除数据将导致您的配置和自定义风格丢失，请谨慎操作。