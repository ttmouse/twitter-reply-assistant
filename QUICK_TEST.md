# 🧪 快速测试指南

测试工具已经创建好了！现在你可以通过可视化界面测试所有功能。

## 📦 立即开始测试

### 1. 重新加载扩展

开发服务器正在运行，现在需要重新加载扩展：

1. 访问 `chrome://extensions/`
2. 找到 **Twitter Reply Assistant**
3. 点击 **刷新按钮** 🔄（或移除后重新加载）

### 2. 打开测试界面

点击浏览器工具栏的扩展图标，会看到一个全新的测试界面！

## 🎯 测试界面功能

### **🧪 功能测试** 标签

这个标签包含所有测试按钮：

#### 📦 测试存储服务
点击这个按钮会自动执行以下测试：
- ✅ 保存测试配置
- ✅ 读取配置
- ✅ 验证配置格式
- ✅ 查看存储使用情况

**预期结果**: 看到 "✅ 所有测试通过！" 消息

#### 🤖 测试 AI 服务
这个按钮需要真实的 API 配置才能使用：
- 测试 API 连接
- 生成测试回复
- 显示延迟和生成结果

⚠️ **注意**: 需要先配置真实的 API 密钥（见下文）

#### 工具按钮

- **👀 查看所有存储数据**: 显示 Chrome 存储中的所有数据（JSON 格式）
- **🗑️ 清除配置**: 删除保存的配置
- **🔄 刷新数据**: 重新加载当前状态

### **⚙️ 配置状态** 标签

查看当前扩展的状态：

- **当前配置**: 显示已保存的 API 配置
- **存储使用**: 显示存储空间使用情况（带进度条）
- **可用回复风格**: 显示所有 6 种回复风格

## 📝 测试步骤建议

### 第一步：测试存储服务

1. 点击扩展图标打开测试界面
2. 确保在 **🧪 功能测试** 标签
3. 点击 **📦 测试存储服务** 按钮
4. 查看测试结果区域

**预期输出**:
```
✅ 步骤 1: 配置已保存
✅ 步骤 2: 配置读取成功
✅ 步骤 3: 配置验证通过
✅ 步骤 4: 存储使用 xxx / 102400 字节 (x.xx%)

✅ 所有测试通过！
```

5. 切换到 **⚙️ 配置状态** 标签
6. 确认看到测试配置信息

### 第二步：查看存储数据

1. 回到 **🧪 功能测试** 标签
2. 点击 **👀 查看所有存储数据**
3. 查看 JSON 格式的存储内容

**预期输出**:
```json
{
  "ai_config": {
    "provider": "siliconflow",
    "apiUrl": "https://api.siliconflow.cn/v1/chat/completions",
    "apiToken": "sk-test-12345678901234567890",
    "model": "Qwen/Qwen2.5-7B-Instruct"
  }
}
```

### 第三步：测试清除功能

1. 点击 **🗑️ 清除配置** 按钮
2. 确认弹窗
3. 切换到 **⚙️ 配置状态** 标签
4. 确认显示 "暂无配置"

### 第四步：测试 AI 服务（可选，需要 API 密钥）

如果你有真实的 API 密钥，可以测试 AI 功能：

#### 方法 A: 通过控制台配置

1. 右键点击扩展图标 → **检查弹出内容**
2. 在控制台输入：

```javascript
// 替换为你的真实 API 密钥
const realConfig = {
  provider: 'siliconflow',
  apiUrl: 'https://api.siliconflow.cn/v1/chat/completions',
  apiToken: 'sk-你的真实密钥',  // 替换这里！
  model: 'Qwen/Qwen2.5-7B-Instruct'
};

// 保存配置
const { StorageService } = await import('./services/storage-service.ts');
await StorageService.setAIConfig(realConfig);

// 刷新页面
location.reload();
```

#### 方法 B: 手动编辑测试代码（不推荐）

不建议直接修改源代码，因为可能会提交敏感信息到 Git。

#### 测试 AI 功能

配置好后：

1. 刷新扩展（关闭弹窗后重新打开）
2. 确认 **⚙️ 配置状态** 显示你的配置
3. 回到 **🧪 功能测试** 标签
4. 点击 **🤖 测试 AI 服务** 按钮

**预期输出**:
```
测试 API 连接...
✅ API 连接成功！延迟: 1234ms

生成测试回复...
✅ 回复生成成功！

原推文: "今天天气真好！☀️"
AI 回复: "是啊，可惜我在办公室看不到 😢"

字符数: 18/120
```

## 🐛 问题排查

### 问题：点击按钮没有反应

**解决方法**:
- 打开控制台（右键弹窗 → 检查）
- 查看是否有错误信息
- 尝试刷新扩展

### 问题：AI 测试失败

**可能原因**:
1. **API 密钥无效**: 检查密钥是否正确
2. **网络问题**: 检查网络连接
3. **API 地址错误**: 确认 URL 正确
4. **配额用尽**: 检查 API 服务商的余额

### 问题：看到 TypeScript 错误

**解决方法**:
```bash
# 重新安装依赖
npm install

# 重启开发服务器
npm run dev
```

## 📊 完整测试检查清单

完成以下测试确认功能正常：

- [ ] 扩展图标显示在工具栏
- [ ] 点击图标打开测试界面
- [ ] 看到两个标签：功能测试、配置状态
- [ ] "测试存储服务" 按钮工作正常
- [ ] 可以查看存储数据
- [ ] 可以清除配置
- [ ] 配置状态标签正确显示信息
- [ ] 看到 6 种回复风格列表
- [ ] （可选）AI 服务测试通过

## 🎓 高级测试

### 在控制台测试

右键弹窗 → 检查，在控制台执行：

```javascript
// 测试所有回复风格
const { AIService } = await import('./services/ai-service.ts');

const testTweet = '今天学到了很多关于 AI 的知识';
const styles = ['professional', 'humorous', 'concise', 'supportive', 'critical', 'questioning'];

for (const style of styles) {
  console.log(`\n测试风格: ${style}`);
  try {
    const reply = await AIService.generateReply(testTweet, style);
    console.log('✅', reply);
  } catch (error) {
    console.error('❌', error.message);
  }
}
```

## 📖 完整文档

想要了解更多测试细节？查看项目根目录的 `TESTING_GUIDE.md` 文件。

---

**测试愉快！** 🎉

如果遇到问题，请检查控制台的错误信息，或参考 TESTING_GUIDE.md 中的详细说明。
